// Copyright (c) 2024 TaguchiKiichi. All rights reserved.
// This Software collects user data such as Email addresses, usernames, and IDs.
// The data is managed by the copyright holder and may be used for Software maintenance.
// Modification, copying, and redistribution are prohibited. Use at your own risk.

const _0x4f6015=_0xf5ab;(function(_0x52bb73,_0x36ae6a){const _0x18fb4a=_0xf5ab,_0x4d58e6=_0x52bb73();while(!![]){try{const _0x10c7bd=parseInt(_0x18fb4a(0x94))/0x1+-parseInt(_0x18fb4a(0xee))/0x2+parseInt(_0x18fb4a(0x76))/0x3*(parseInt(_0x18fb4a(0x89))/0x4)+-parseInt(_0x18fb4a(0x78))/0x5+parseInt(_0x18fb4a(0xa8))/0x6+parseInt(_0x18fb4a(0x68))/0x7*(-parseInt(_0x18fb4a(0xca))/0x8)+-parseInt(_0x18fb4a(0xe0))/0x9;if(_0x10c7bd===_0x36ae6a)break;else _0x4d58e6['push'](_0x4d58e6['shift']());}catch(_0x137797){_0x4d58e6['push'](_0x4d58e6['shift']());}}}(_0x2acd,0x56d83));let OnQuestion=location['pathname']==_0x4f6015(0xb0),OldLoc;!OnQuestion&&(OldLoc=location[_0x4f6015(0x83)]);function makeDraggable(_0x1100ab){const _0x537956=_0x4f6015;let _0xacdc55=0x0,_0x33919a=0x0,_0x80935e=0x0,_0x366d74=0x0;_0x1100ab[_0x537956(0xd5)]=function(_0x39e6c7){const _0x50e8f0=_0x537956;_0x39e6c7[_0x50e8f0(0xaa)](),_0x80935e=_0x39e6c7[_0x50e8f0(0xfc)],_0x366d74=_0x39e6c7[_0x50e8f0(0xdc)],document[_0x50e8f0(0xd4)]=_0x3a583c,document[_0x50e8f0(0x8d)]=_0x2550cc;};function _0x2550cc(_0x2e3ea7){const _0x2838ad=_0x537956;_0x2e3ea7[_0x2838ad(0xaa)](),_0xacdc55=_0x80935e-_0x2e3ea7[_0x2838ad(0xfc)],_0x33919a=_0x366d74-_0x2e3ea7[_0x2838ad(0xdc)],_0x80935e=_0x2e3ea7[_0x2838ad(0xfc)],_0x366d74=_0x2e3ea7['clientY'],_0x1100ab[_0x2838ad(0x9e)][_0x2838ad(0x69)]=_0x1100ab[_0x2838ad(0xdd)]-_0x33919a+'px',_0x1100ab[_0x2838ad(0x9e)][_0x2838ad(0xa4)]=_0x1100ab['offsetLeft']-_0xacdc55+'px';}function _0x3a583c(){const _0x30eebf=_0x537956;document[_0x30eebf(0xd4)]=null,document[_0x30eebf(0x8d)]=null;}}function StartLoad(){const _0x133c3a=_0x4f6015;document['getElementById'](_0x133c3a(0xec))['style'][_0x133c3a(0xb4)]=_0x133c3a(0x87);}function _0xf5ab(_0x8648f5,_0x39f0fa){const _0x2acd91=_0x2acd();return _0xf5ab=function(_0xf5abfc,_0x14a055){_0xf5abfc=_0xf5abfc-0x64;let _0x2bd0fa=_0x2acd91[_0xf5abfc];return _0x2bd0fa;},_0xf5ab(_0x8648f5,_0x39f0fa);}function ExitLoad(){const _0x29455d=_0x4f6015;document[_0x29455d(0x99)](_0x29455d(0xec))['style'][_0x29455d(0xb4)]='none';}let InjectHTML=_0x4f6015(0xdf),AnswerData,ScriptVersion=_0x4f6015(0xd9),UserData={'AuthToken':'','TestID':''},AutoClearData={'ClassID':'','TaskID':''},UserConfig={'CorrectAnswerRate':0x3c},AnswerAssist=![],FakeMissGen=!![];const sleep=_0x400a9b=>new Promise(_0x8c4f96=>setTimeout(_0x8c4f96,_0x400a9b));async function ShowCustomPop(_0x49a510){const _0x3c0183=_0x4f6015;document['getElementById'](_0x3c0183(0xea))[_0x3c0183(0x9e)]['display']=_0x3c0183(0x87),document[_0x3c0183(0x99)](_0x3c0183(0xea))[_0x3c0183(0xf9)]=_0x49a510,await sleep(0x1f4),document[_0x3c0183(0x99)](_0x3c0183(0xea))[_0x3c0183(0x9e)][_0x3c0183(0xb4)]=_0x3c0183(0x6d);}function AssistFunc(){const _0x757012=_0x4f6015;for(let _0x22c5a3=0x0;_0x22c5a3<document['getElementById'](_0x757012(0xb8))[_0x757012(0xfa)][_0x757012(0xf8)];_0x22c5a3++){document[_0x757012(0x99)](_0x757012(0xb8))[_0x757012(0xfa)][_0x22c5a3][_0x757012(0x9e)][_0x757012(0xd6)]=_0x757012(0xbc);}document[_0x757012(0x99)](_0x757012(0xb8))[_0x757012(0xfa)][Number(document['getElementsByClassName'](_0x757012(0xc9))[0x0][_0x757012(0xf9)][_0x757012(0xa7)]('\x20','')['replaceAll']('\x0a','')['split']('/')[0x0])+0x3][_0x757012(0x9e)][_0x757012(0xd6)]=_0x757012(0xcd),console[_0x757012(0xab)]('changed');}const callback=_0x1eccf3=>{const _0x1f1347=_0x4f6015;for(const _0x4032c9 of _0x1eccf3){_0x4032c9[_0x1f1347(0xc1)]===_0x1f1347(0xc0)&&_0x4032c9[_0x1f1347(0xc5)][_0x1f1347(0x85)](_0x4b973b=>{const _0x4d429d=_0x1f1347;_0x4b973b[_0x4d429d(0xc8)]===Node[_0x4d429d(0xd0)]&&_0x4b973b[_0x4d429d(0xa6)][_0x4d429d(0xcc)](_0x4d429d(0xd7))&&AnswerAssist&&AssistFunc();});}},config={'childList':!![],'subtree':!![]},observer=new MutationObserver(callback);function CloseElem(){const _0x2eadd4=_0x4f6015;document['getElementById']('answerPop')[_0x2eadd4(0x9e)][_0x2eadd4(0xb4)]='none';}function CloseElem2(){const _0x24401e=_0x4f6015;document['getElementById'](_0x24401e(0xbf))[_0x24401e(0x9e)][_0x24401e(0xb4)]=_0x24401e(0x6d);}function GetUserData(){const _0x222eba=_0x4f6015;ucfg=localStorage[_0x222eba(0xdb)](_0x222eba(0x7c));ucfg?console['log'](ucfg):(localStorage[_0x222eba(0x98)](_0x222eba(0x7c),JSON['stringify'](UserConfig)),console[_0x222eba(0xab)](ucfg));UserData['AuthToken']=localStorage[_0x222eba(0xdb)](_0x222eba(0xce)),AutoClearData[_0x222eba(0xad)]=location['pathname'][_0x222eba(0x9b)]('/')[0x3],AutoClearData[_0x222eba(0x84)]=JSON[_0x222eba(0x8f)](localStorage['getItem'](_0x222eba(0xbb)))[_0x222eba(0x80)]['focusedClassInfo']['id_class'];const _0x5f3a7b='https://app-api.abceed.com/web/world_practices/info?id_task='+location['pathname'][_0x222eba(0x9b)]('/')[0x3];fetch(_0x5f3a7b,{'method':_0x222eba(0xe1),'headers':{'Authorization':_0x222eba(0xc2)+UserData['AuthToken'],'sec-ch-ua':_0x222eba(0x6f),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x222eba(0x7f),'Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':'cors','Sec-Fetch-Site':_0x222eba(0x74),'User-Agent':_0x222eba(0x9d),'X-User-Agent':'abceed-web:7.1.0/Chrome:127.0.6533.132','Content-Type':'application/json'}})['then'](_0x1b1917=>{const _0x1d101e=_0x222eba;if(!_0x1b1917['ok'])throw new Error(_0x1d101e(0x91));return _0x1b1917['json']();})[_0x222eba(0xa0)](_0x426b9=>{const _0x84fb6b=_0x222eba;UserData[_0x84fb6b(0xb9)]=_0x426b9[_0x84fb6b(0x75)][_0x84fb6b(0x7e)];})[_0x222eba(0xf4)](_0x12eb9d=>{const _0x112349=_0x222eba;console[_0x112349(0xef)](_0x112349(0x66),_0x12eb9d);}),ShowCustomPop(_0x222eba(0xbe));}function ToggleAssist(){const _0x4b798a=_0x4f6015;if(location[_0x4b798a(0x83)]!='/books/study/word-test-confirm/quiz'){alert(_0x4b798a(0xe5));return;}AnswerAssist?(document[_0x4b798a(0x99)]('tglAst')[_0x4b798a(0x9e)][_0x4b798a(0x67)](_0x4b798a(0xb3),_0x4b798a(0xbc),'important'),document[_0x4b798a(0x99)](_0x4b798a(0xc4))['style'][_0x4b798a(0x67)]('color','black',_0x4b798a(0x7b)),AnswerAssist=!AnswerAssist,ShowCustomPop('Assist\x20OFF'),observer[_0x4b798a(0xd3)]()):(document[_0x4b798a(0x99)](_0x4b798a(0xc4))[_0x4b798a(0x9e)]['setProperty'](_0x4b798a(0xb3),'royalblue',_0x4b798a(0x7b)),document[_0x4b798a(0x99)](_0x4b798a(0xc4))[_0x4b798a(0x9e)][_0x4b798a(0x67)](_0x4b798a(0xf0),_0x4b798a(0xbc),_0x4b798a(0x7b)),AnswerAssist=!AnswerAssist,ShowCustomPop('Assist\x20ON'),AssistFunc(),observer[_0x4b798a(0x8c)](document['body'],config));}function ShowAnswer(){const _0x115a6d=_0x4f6015,_0x305a66=_0x115a6d(0xe2)+location['pathname'][_0x115a6d(0x9b)]('/')[0x3];StartLoad(),fetch(_0x305a66,{'method':'GET','headers':{'Authorization':_0x115a6d(0xc2)+UserData[_0x115a6d(0xda)],'sec-ch-ua':_0x115a6d(0x6f),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x115a6d(0x7f),'Sec-Fetch-Dest':_0x115a6d(0x6b),'Sec-Fetch-Mode':_0x115a6d(0x65),'Sec-Fetch-Site':_0x115a6d(0x74),'User-Agent':_0x115a6d(0x9d),'X-User-Agent':_0x115a6d(0xc7),'Content-Type':'application/json'}})[_0x115a6d(0xa0)](_0x4b0f19=>{if(!_0x4b0f19['ok'])throw new Error('Network\x20response\x20was\x20not\x20ok');return _0x4b0f19['json']();})['then'](_0x495ddf=>{const _0x3bf4af=_0x115a6d;console[_0x3bf4af(0xab)](_0x3bf4af(0x7d),_0x495ddf['all_question_list']),AnswerData=_0x495ddf[_0x3bf4af(0xa2)],ansPop=document[_0x3bf4af(0x99)]('answerPop'),makeDraggable(ansPop),ansPop[_0x3bf4af(0xe8)]=_0x3bf4af(0xf6),te=document[_0x3bf4af(0xb2)]('h1'),te['textContent']=_0x3bf4af(0xd8),ansPop[_0x3bf4af(0x86)](te),AnswerListElem=document[_0x3bf4af(0xb2)]('a'),AnswerListElem['innerHTML']=_0x3bf4af(0xac),ansPop[_0x3bf4af(0x86)](AnswerListElem),_0x495ddf['all_question_list'][_0x3bf4af(0x85)](_0x2ff5bb=>{const _0x598c08=_0x3bf4af;AnswerListElem=document[_0x598c08(0xb2)]('a'),AnswerListElem[_0x598c08(0xe8)]=_0x2ff5bb[_0x598c08(0xf1)]+'\x20'+_0x2ff5bb['word_ja']+'<hr\x20style=\x22border:\x20none\x20!important;border-top:\x201px\x20solid\x20black\x20!important;margin:\x200\x20!important;\x22><br>',ansPop[_0x598c08(0x86)](AnswerListElem);}),ansPop['style']['display']=_0x3bf4af(0x87);})[_0x115a6d(0xf4)](_0x11af82=>{const _0x15141d=_0x115a6d;console[_0x15141d(0xef)]('Error:',_0x11af82);})[_0x115a6d(0x96)](()=>{ExitLoad();});}async function RunAuto(){const _0x22bd54=_0x4f6015;ShowCustomPop('Boot\x20system...'),cfg={'ClassID':AutoClearData[_0x22bd54(0x84)],'TaskID':AutoClearData[_0x22bd54(0xad)],'authorization':UserData[_0x22bd54(0xda)],'TestID':UserData[_0x22bd54(0xb9)]},await AutoClear(cfg);}async function AutoClear(_0x92f081){let _0x434e18;(async function(){const _0x3c62ba=_0xf5ab,_0x29506b=_0x3c62ba(0xe2)+_0x92f081['TaskID'];try{const _0x2f510b=await fetch(_0x29506b,{'headers':{'documentLifecycle':_0x3c62ba(0x82),'frameType':_0x3c62ba(0x81),'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':_0x3c62ba(0xe9),'Accept-Language':_0x3c62ba(0x8a),'authorization':_0x3c62ba(0xc2)+_0x92f081['authorization'],'Content-Type':_0x3c62ba(0xf3),'sec-ch-ua':_0x3c62ba(0x6f),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x3c62ba(0x7f),'Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':'cors','Sec-Fetch-Site':_0x3c62ba(0x74),'User-Agent':'Mozilla/5.0\x20(X11;\x20CrOS\x20x86_64\x2014541.0.0)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/127.0.0.0\x20Safari/537.36','X-User-Agent':_0x3c62ba(0xc7)}});if(!_0x2f510b['ok'])throw new Error('レスポンスステータス:\x20'+_0x2f510b[_0x3c62ba(0x73)]);const _0x70f8b4=await _0x2f510b[_0x3c62ba(0xa9)]();console['log'](_0x70f8b4),_0x434e18=_0x70f8b4,qNum=_0x434e18[_0x3c62ba(0xa2)][_0x3c62ba(0xf8)]-0x1;qNum>=0x4b&&alert(_0x3c62ba(0xe4));const _0x57e776=_0x301a7a=>new Promise(_0x4a54df=>setTimeout(_0x4a54df,_0x301a7a));for(let _0x1ae9dc=0x0;_0x1ae9dc<_0x434e18[_0x3c62ba(0xa2)]['length'];_0x1ae9dc++){const _0x10f42a=_0x434e18[_0x3c62ba(0xa2)][_0x1ae9dc];_0x431f58(_0x10f42a,_0x1ae9dc,qNum),_0x185b03(_0x92f081),await _0x57e776(0x32);}ShowCustomPop(_0x3c62ba(0x88));}catch(_0x229d93){console[_0x3c62ba(0xef)](_0x229d93['message']);}}());async function _0x185b03(_0x33cd8a){const _0x598669=_0xf5ab,_0x7a3e57={'add_second':Math[_0x598669(0xaf)](Math[_0x598669(0x95)]()*0x1e),'id_task':_0x33cd8a[_0x598669(0xad)],'id_test':_0x33cd8a['TestID']};console[_0x598669(0xab)](_0x598669(0x8b),_0x7a3e57[_0x598669(0x64)]);const _0x4d9fc9=_0x598669(0xcb);await fetch(_0x4d9fc9,{'method':_0x598669(0x7a),'body':JSON[_0x598669(0x9f)](_0x7a3e57),'headers':{'documentLifecycle':_0x598669(0x82),'frameType':_0x598669(0x81),'Accept':_0x598669(0xf5),'Accept-Encoding':'gzip,\x20deflate,\x20br,\x20zstd','Accept-Language':_0x598669(0x8a),'authorization':_0x598669(0xc2)+_0x33cd8a[_0x598669(0x70)],'Content-Type':_0x598669(0xf3),'sec-ch-ua':_0x598669(0x72),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x598669(0x7f),'Sec-Fetch-Dest':_0x598669(0x6b),'Sec-Fetch-Mode':'cors','Sec-Fetch-Site':_0x598669(0x74),'User-Agent':_0x598669(0x9d),'X-User-Agent':_0x598669(0xc7)}})[_0x598669(0xa0)](_0x1b29b1=>{const _0x2ebbbe=_0x598669;if(!_0x1b29b1['ok'])throw new Error('Error\x20:',_0x1b29b1[_0x2ebbbe(0x73)]);else console[_0x2ebbbe(0xab)](_0x1b29b1);});}async function _0x431f58(_0x49afce,_0x10173f,_0x5c1058){const _0x1f6fed=_0xf5ab;let _0x1cc4a9=0x1;UserCfg=JSON[_0x1f6fed(0x8f)](localStorage[_0x1f6fed(0xdb)](_0x1f6fed(0x7c)));Math[_0x1f6fed(0xaf)](Math[_0x1f6fed(0x95)]()*0x64)>UserCfg[_0x1f6fed(0xf7)]&&FakeMissGen&&(console['log'](_0x1f6fed(0xa3)),_0x1cc4a9=0x2,_0x49afce[_0x1f6fed(0xfb)]!=0x4?_0x49afce[_0x1f6fed(0xfb)]++:_0x49afce[_0x1f6fed(0xfb)]--);const _0x5385cb={'question_list':[{'id_test':_0x92f081[_0x1f6fed(0xb9)],'num_part':_0x49afce['num_part'],'num_question':_0x49afce['num_question'],'inputted_answer':'','is_uneasy':0x0,'consume_second':Math['floor'](Math[_0x1f6fed(0x95)]()*0x96),'acquire_status':_0x1cc4a9,'choiced_answer':_0x49afce[_0x1f6fed(0xfb)]}],'id_task':_0x92f081[_0x1f6fed(0xad)],'id_class':_0x92f081[_0x1f6fed(0x84)],'is_world_practice':0x1};console[_0x1f6fed(0xab)](_0x5385cb);_0x5c1058==_0x10173f&&(_0x5385cb[_0x1f6fed(0x6e)]=0x1,console[_0x1f6fed(0xab)]('add'));const _0x125278=_0x1f6fed(0x79);try{const _0x3f8b1a=await fetch(_0x125278,{'method':'POST','body':JSON[_0x1f6fed(0x9f)](_0x5385cb),'headers':{'documentLifecycle':_0x1f6fed(0x82),'frameType':'outermost_frame','Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':_0x1f6fed(0xe9),'Accept-Language':'ja,en;q=0.9,ig;q=0.8,it;q=0.7,sn;q=0.6,tg;q=0.5,uz;q=0.4,lt;q=0.3,nso;q=0.2,az;q=0.1,ee;q=0.1','authorization':_0x1f6fed(0xc2)+_0x92f081['authorization'],'Content-Type':_0x1f6fed(0xf3),'sec-ch-ua':_0x1f6fed(0x72),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x1f6fed(0x7f),'Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':_0x1f6fed(0x65),'Sec-Fetch-Site':'same-site','User-Agent':'Mozilla/5.0\x20(X11;\x20CrOS\x20x86_64\x2014541.0.0)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/127.0.0.0\x20Safari/537.36','X-User-Agent':_0x1f6fed(0xc7)}})['then'](_0x3c213d=>{const _0x3edcab=_0x1f6fed;if(!_0x3c213d['ok'])throw new Error(_0x3edcab(0x91));return _0x3c213d[_0x3edcab(0xa9)]();})['then'](_0x55380f=>{const _0x5084cf=_0x1f6fed;console['log']('Success\x20:\x20'+_0x10173f),console[_0x5084cf(0xab)](_0x55380f);})[_0x1f6fed(0xf4)](_0x3fee25=>{const _0x260f84=_0x1f6fed;console['error'](_0x260f84(0x66),_0x3fee25);});}catch(_0x33e800){console[_0x1f6fed(0xef)](_0x33e800[_0x1f6fed(0xbd)]);}}}async function GetUserDataList(){const _0x3fd5d6=_0x4f6015,_0x1d8655=await fetch(_0x3fd5d6(0xcf),{'method':'GET'})['then'](async _0xc21d30=>{const _0x5f2907=_0x3fd5d6;return await _0xc21d30[_0x5f2907(0xa9)]();});}function _0x2acd(){const _0x213727=['Injected!','caRate','Updated','answerPop','TestID','open','abceed','white','message','Success','configPop','childList','type','Bearer\x20','toLocaleString','tglAst','addedNodes','auth','abceed-web:7.1.0/Chrome:127.0.6533.132','nodeType','marksheet-answer__number','8zNNKsF','https://app-api.abceed.com/web/study_time/update','contains','yellow','abcJwtToken','https://abceed-utiliy-auth.deno.dev/users','ELEMENT_NODE','div','https://github.com/TaguchiKiichi/Abceed-Utility','disconnect','onmouseup','onmousedown','backgroundColor','loading','Answer\x20List','v0.1.5','AuthToken','getItem','clientY','offsetTop','You\x20Unauthorized','PHN0eWxlPgogIC5kcmFnZ2FibGUgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDUwcHg7CiAgICAgIGxlZnQ6IDUwcHg7CiAgICAgIGN1cnNvcjogbW92ZTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrOwogICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7CiAgICAgIHotaW5kZXg6IDEwMDA7CiAgICAgIHVzZXItc2VsZWN0OiBub25lOwogIH0KCiAgLnN3aXRjaGJ0biB7CiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2IoMTYsIDEwOSwgMTQwKTsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgIGNvbG9yOiBibGFjazsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogIH0KCiAgI2h1YmJveCB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgIGN1cnNvcjogbW92ZTsKICAgICAgYm9yZGVyOiAycHggc29saWQgYmxhY2s7CiAgICAgIHBhZGRpbmc6IDIwcHggMjBweCAyMHB4IDIwcHg7CiAgICAgIHotaW5kZXg6ICAgOTk5OwogIH0KCiAgLnBvcCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogIH0KCiNsb2FkaW5nUG9wIHsKICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgZGlzcGxheTogbm9uZTsKICAgYm9yZGVyOiAycHggc29saWQgYmxhY2s7CiAgIHBhZGRpbmc6IDIwcHggMjBweCAyMHB4IDIwcHg7Cn0KCiNhbnN3ZXJQb3AgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICBkaXNwbGF5OiBub25lOwogICAgICBjdXJzb3I6IG1vdmU7CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrOwogICAgICBwYWRkaW5nOiAyMHB4IDIwcHggMjBweCAyMHB4OwogICAgICB6LWluZGV4OiAgIDk5OTsKfQoKI2NvbmZpZ1BvcCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICBkaXNwbGF5OiBub25lOwogICAgICBjdXJzb3I6IG1vdmU7CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrOwogICAgICBwYWRkaW5nOiAyMHB4IDIwcHggMjBweCAyMHB4OwogICAgICB6LWluZGV4OiAgIDk5OTsKfQoKI2Nsb3NlQnRuIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAxMHB4OwogIHJpZ2h0OiAxMHB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQoKI2N1c3RvbVBvcCB7CiAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgIGRpc3BsYXk6IG5vbmU7CiAgIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrOwogICBwYWRkaW5nOiAyMHB4IDIwcHggMjBweCAyMHB4Owp9CgogIC5kcmFnIHsKICAgICAgei1pbmRleDogMTAwMTsKICB9Cjwvc3R5bGU+Cgo8ZGl2IGlkPSJkcmFnZ2FibGVFbGVtZW50IiBjbGFzcz0iZHJhZ2dhYmxlIj4KICA8YnV0dG9uIGlkPSJzaG93SHViYm94IiBjbGFzcz0ic3dpdGNoYnRuIj5BYmNlZWQgVXRpbGl0eTwvYnV0dG9uPgo8L2Rpdj4KCjxkaXYgaWQ9Imh1YmJveCI+CiAgPGgxPjxiPkFiY2VlZCBVdGlsaXR5IEh1YjwvYj48L2gxPgogIDxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6R2V0VXNlckRhdGEoKSI+SW5pdGFsaXplPC9hPjxicj4KPGEgb25jbGljaz0iamF2YXNjcmlwdDpTaG93QW5zd2VyKCkiPlZpZXcgQW5zd2VyPC9hPjxicj4KPGEgaWQ9InRnbEFzdCIgb25jbGljaz0iamF2YXNjcmlwdDpUb2dnbGVBc3Npc3QoKSI+QW5zd2VyIEFzc2lzdDwvYT48YnI+CjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6UnVuQXV0bygpIj5BdXRvIENvbXBsZXRlPC9hPjxicj4KPGhyPgo8YSBvbmNsaWNrPSJqYXZhc2NyaXB0Ok9wZW5DZmcoKSI+Q29uZmlnIFNldHRpbmc8L2E+CjxkaXYgY2xhc3M9InBvcCI+CiAgPGgxIGlkPSJsb2FkaW5nUG9wIj5Mb2FkaW5nLi4uPC9oMT4KICA8aDEgaWQ9ImN1c3RvbVBvcCI+PC9oMT4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGlkPSJhbnN3ZXJQb3AiPgogIDxhIGlkPSJjbG9zZUJ0biIgb25jbGljaz0iamF2YXNjcmlwdDpDbG9zZUVsZW0oKSI+eDwvYT4KPC9kaXY+CjxkaXYgaWQ9ImNvbmZpZ1BvcCI+CiAgICA8YSBpZD0iY2xvc2VCdG4iIG9uY2xpY2s9ImphdmFzY3JpcHQ6Q2xvc2VFbGVtMigpIj54PC9hPgogICAgPGE+Q29ycmVjdCBBbnN3ZXIgUmF0ZSA6PC9hPjxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJjYVJhdGUiPjxiZj4KICAgIDxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6VXBkYXRlQ2ZnKCkiPlNhdmU8L2E+CiAgPC9kaXY+Cgo8c2NyaXB0PgogICAgLy9ib290IGpzCiAgICBsZXQgT25RdWVzdGlvbiA9IChsb2NhdGlvbi5wYXRobmFtZSA9PSAiL2Jvb2tzL3N0dWR5L3dvcmQtdGVzdC1jb25maXJtL3F1aXoiKTsKICAgIGxldCBPbGRMb2M7CiAgICBpZiAoIU9uUXVlc3Rpb24pIHsKICAgICAgICBPbGRMb2MgPSBsb2NhdGlvbi5wYXRobmFtZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbWFrZURyYWdnYWJsZShlbGVtZW50KSB7CiAgICAgICAgbGV0IG9mZnNldFggPSAwLCBvZmZzZXRZID0gMCwgbW91c2VYID0gMCwgbW91c2VZID0gMDsKICAgIAogICAgICAgIGVsZW1lbnQub25tb3VzZWRvd24gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgbW91c2VYID0gZS5jbGllbnRYOwogICAgICAgICAgICBtb3VzZVkgPSBlLmNsaWVudFk7CiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IGNsb3NlRHJhZ0VsZW1lbnQ7CiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZWxlbWVudERyYWc7CiAgICAgICAgfTsKICAgIAogICAgICAgIGZ1bmN0aW9uIGVsZW1lbnREcmFnKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBvZmZzZXRYID0gbW91c2VYIC0gZS5jbGllbnRYOwogICAgICAgICAgICBvZmZzZXRZID0gbW91c2VZIC0gZS5jbGllbnRZOwogICAgICAgICAgICBtb3VzZVggPSBlLmNsaWVudFg7CiAgICAgICAgICAgIG1vdXNlWSA9IGUuY2xpZW50WTsKICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSAoZWxlbWVudC5vZmZzZXRUb3AgLSBvZmZzZXRZKSArICJweCI7CiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IChlbGVtZW50Lm9mZnNldExlZnQgLSBvZmZzZXRYKSArICJweCI7CiAgICAgICAgfQogICAgCiAgICAgICAgZnVuY3Rpb24gY2xvc2VEcmFnRWxlbWVudCgpIHsKICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDsKICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gU3RhcnRMb2FkKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9hZGluZ1BvcCIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBFeGl0TG9hZCgpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvYWRpbmdQb3AiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQogICAgCiAgICAvL2FiY2VlZCBzY3JpcHQKICAgIGxldCBBbnN3ZXJEYXRhOwoKICAgIGxldCBVc2VyRGF0YSA9IHsKICAgICAgICBBdXRoVG9rZW4gOiAiIiwKICAgICAgICBUZXN0SUQ6ICIiLAogICAgfQoKICAgIGxldCBBdXRvQ2xlYXJEYXRhID0gewogICAgICAgIENsYXNzSUQgOiAiIiwKICAgICAgICBUYXNrSUQgOiAiIiwKICAgIH0KICAgIAogICAgbGV0IEFuc3dlckFzc2lzdCA9IGZhbHNlOwogICAgbGV0IEZha2VNaXNzR2VuID0gdHJ1ZTsKICAgIAogICAgY29uc3Qgc2xlZXAgPSAodGltZSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZSkpOwogICAgCiAgICBhc3luYyBmdW5jdGlvbiBTaG93Q3VzdG9tUG9wKG1zKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImN1c3RvbVBvcCIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjdXN0b21Qb3AiKS50ZXh0Q29udGVudCA9IG1zOwogICAgICAgIGF3YWl0IHNsZWVwKDUwMCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImN1c3RvbVBvcCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIEFzc2lzdEZ1bmMoKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYW5zd2VyUG9wIikuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFuc3dlclBvcCIpLmNoaWxkcmVuW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ3aGl0ZSI7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbnN3ZXJQb3AiKS5jaGlsZHJlbltOdW1iZXIoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibWFya3NoZWV0LWFuc3dlcl9fbnVtYmVyIilbMF0udGV4dENvbnRlbnQucmVwbGFjZUFsbCgiICIsIiIpLnJlcGxhY2VBbGwoIlxuIiwiIikuc3BsaXQoIi8iKVswXSkrM10uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gInllbGxvdyI7CiAgICAgICAgY29uc29sZS5sb2coImNoYW5nZWQiKTsKICAgIH0KICAgIAogICAgY29uc3QgY2FsbGJhY2sgPSAobXV0YXRpb25zTGlzdCkgPT4gewogICAgICAgIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zTGlzdCkgewogICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHsKICAgICAgICAgICAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2xvYWRpbmcnKSAmJiBBbnN3ZXJBc3Npc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQXNzaXN0RnVuYygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIAogICAgY29uc3QgY29uZmlnID0geyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfTsKICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2FsbGJhY2spOwogICAgCiAgICBmdW5jdGlvbiBDbG9zZUVsZW0oKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFuc3dlclBvcCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgICBmdW5jdGlvbiBDbG9zZUVsZW0yKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb25maWdQb3AiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQoKZnVuY3Rpb24gR2V0VXNlckRhdGEoKSB7CiAgICBVc2VyRGF0YS5BdXRoVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjSnd0VG9rZW4iKTsKICAgIEF1dG9DbGVhckRhdGEuVGFza0lEID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoIi8iKVszXTsKICAgIEF1dG9DbGVhckRhdGEuQ2xhc3NJRCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiY2VlZCIpKS5jbGFzc2VzLmZvY3VzZWRDbGFzc0luZm8uaWRfY2xhc3M7CgoKICAgIGNvbnN0IHVybCA9ICdodHRwczovL2FwcC1hcGkuYWJjZWVkLmNvbS93ZWIvd29ybGRfcHJhY3RpY2VzL2luZm8/aWRfdGFzaz0nK2xvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCIvIilbM107CiAgICBmZXRjaCh1cmwsIHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBVc2VyRGF0YS5BdXRoVG9rZW4sCiAgICAgICAgICAgICdzZWMtY2gtdWEnOiAnIk5vdClBO0JyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjciLCAiQ2hyb21pdW0iO3Y9IjEyNyInLAogICAgICAgICAgICAnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MCcsCiAgICAgICAgICAgICdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIkNocm9tZSBPUyInLAogICAgICAgICAgICAnU2VjLUZldGNoLURlc3QnOiAnZW1wdHknLAogICAgICAgICAgICAnU2VjLUZldGNoLU1vZGUnOiAnY29ycycsCiAgICAgICAgICAgICdTZWMtRmV0Y2gtU2l0ZSc6ICdzYW1lLXNpdGUnLAogICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoWDExOyBDck9TIHg4Nl82NCAxNDU0MS4wLjApIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjcuMC4wLjAgU2FmYXJpLzUzNy4zNicsCiAgICAgICAgICAgICdYLVVzZXItQWdlbnQnOiAnYWJjZWVkLXdlYjo3LjEuMC9DaHJvbWU6MTI3LjAuNjUzMy4xMzInLAogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfSwKICAgIH0pCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBvaycpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgfSkKICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgIFVzZXJEYXRhLlRlc3RJRCA9IGRhdGEudGFza19pbmZvLmlkX3Rlc3Q7CiAgICB9KQogICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7CiAgICB9KTsKCiAgICBTaG93Q3VzdG9tUG9wKCJTdWNjZXNzIik7Cn0KCmZ1bmN0aW9uIFRvZ2dsZUFzc2lzdCgpIHsKICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZSAhPSAiL2Jvb2tzL3N0dWR5L3dvcmQtdGVzdC1jb25maXJtL3F1aXoiKSB7CiAgICAgICAgYWxlcnQoIuOCv+OCueOCr+OCkumWi+Wni+OBl+OBpuOBi+OCieaKvOOBl+OBpuOBj+OBoOOBleOBhCIpOwogICAgICAgIHJldHVybgogICAgfQogICAgaWYgKEFuc3dlckFzc2lzdCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0Z2xBc3QiKS5zdHlsZS5zZXRQcm9wZXJ0eSgiYmFja2dyb3VuZC1jb2xvciIsIndoaXRlIiwiaW1wb3J0YW50Iik7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRnbEFzdCIpLnN0eWxlLnNldFByb3BlcnR5KCJjb2xvciIsImJsYWNrIiwiaW1wb3J0YW50Iik7CiAgICAgICAgQW5zd2VyQXNzaXN0ID0gIUFuc3dlckFzc2lzdDsKICAgICAgICBTaG93Q3VzdG9tUG9wKCJBc3Npc3QgT0ZGIik7CiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGdsQXN0Iikuc3R5bGUuc2V0UHJvcGVydHkoImJhY2tncm91bmQtY29sb3IiLCJyb3lhbGJsdWUiLCJpbXBvcnRhbnQiKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGdsQXN0Iikuc3R5bGUuc2V0UHJvcGVydHkoImNvbG9yIiwid2hpdGUiLCJpbXBvcnRhbnQiKTsKICAgICAgICBBbnN3ZXJBc3Npc3QgPSAhQW5zd2VyQXNzaXN0OwogICAgICAgIFNob3dDdXN0b21Qb3AoIkFzc2lzdCBPTiIpOwogICAgICAgIEFzc2lzdEZ1bmMoKTsKICAgICAgICAKICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIGNvbmZpZyk7CiAgICB9Cn0KZnVuY3Rpb24gU2hvd0Fuc3dlcigpIHsKICAgIGNvbnN0IHVybCA9ICdodHRwczovL2FwcC1hcGkuYWJjZWVkLmNvbS93ZWIvd29ybGRfcHJhY3RpY2VzL2luZm8/aWRfdGFzaz0nK2xvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCIvIilbM107CgpTdGFydExvYWQoKTsKZmV0Y2godXJsLCB7CiAgICBtZXRob2Q6ICdHRVQnLAogICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgVXNlckRhdGEuQXV0aFRva2VuLAogICAgICAgICdzZWMtY2gtdWEnOiAnIk5vdClBO0JyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjciLCAiQ2hyb21pdW0iO3Y9IjEyNyInLAogICAgICAgICdzZWMtY2gtdWEtbW9iaWxlJzogJz8wJywKICAgICAgICAnc2VjLWNoLXVhLXBsYXRmb3JtJzogJyJDaHJvbWUgT1MiJywKICAgICAgICAnU2VjLUZldGNoLURlc3QnOiAnZW1wdHknLAogICAgICAgICdTZWMtRmV0Y2gtTW9kZSc6ICdjb3JzJywKICAgICAgICAnU2VjLUZldGNoLVNpdGUnOiAnc2FtZS1zaXRlJywKICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoWDExOyBDck9TIHg4Nl82NCAxNDU0MS4wLjApIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjcuMC4wLjAgU2FmYXJpLzUzNy4zNicsCiAgICAgICAgJ1gtVXNlci1BZ2VudCc6ICdhYmNlZWQtd2ViOjcuMS4wL0Nocm9tZToxMjcuMC42NTMzLjEzMicsCiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfSwKfSkKLnRoZW4ocmVzcG9uc2UgPT4gewogICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignTmV0d29yayByZXNwb25zZSB3YXMgbm90IG9rJyk7CiAgICB9CiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwp9KQoudGhlbihkYXRhID0+IHsKICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzOicsIGRhdGEuYWxsX3F1ZXN0aW9uX2xpc3QpOwogICAgQW5zd2VyRGF0YSA9IGRhdGEuYWxsX3F1ZXN0aW9uX2xpc3Q7CgogICAgYW5zUG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFuc3dlclBvcCIpOwogICAgbWFrZURyYWdnYWJsZShhbnNQb3ApOwogICAgYW5zUG9wLmlubmVySFRNTCA9ICc8YSBpZD0iY2xvc2VCdG4iIG9uY2xpY2s9ImphdmFzY3JpcHQ6Q2xvc2VFbGVtKCkiPsOXPC9hPic7CiAgICB0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImgxIik7CiAgICB0ZS50ZXh0Q29udGVudCA9ICJBbnN3ZXIgTGlzdCI7CiAgICBhbnNQb3AuYXBwZW5kQ2hpbGQodGUpOwogICAgQW5zd2VyTGlzdEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICBBbnN3ZXJMaXN0RWxlbS5pbm5lckhUTUwgPSBg6Iux6KqeIOaXpeacrOiqnjxociBzdHlsZT0iYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDogMXB4IHNvbGlkIGJsYWNrICFpbXBvcnRhbnQ7bWFyZ2luOiAwICFpbXBvcnRhbnQ7Ij48YnI+YDsKICAgIGFuc1BvcC5hcHBlbmRDaGlsZChBbnN3ZXJMaXN0RWxlbSk7CiAgICBkYXRhLmFsbF9xdWVzdGlvbl9saXN0LmZvckVhY2goYW5zID0+IHsKICAgICAgICBBbnN3ZXJMaXN0RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBBbnN3ZXJMaXN0RWxlbS5pbm5lckhUTUwgPSBgJHthbnMud29yZH0gJHthbnMud29yZF9qYX08aHIgc3R5bGU9ImJvcmRlcjogbm9uZSAhaW1wb3J0YW50O2JvcmRlci10b3A6IDFweCBzb2xpZCBibGFjayAhaW1wb3J0YW50O21hcmdpbjogMCAhaW1wb3J0YW50OyI+PGJyPmA7CiAgICAgICAgYW5zUG9wLmFwcGVuZENoaWxkKEFuc3dlckxpc3RFbGVtKTsKICAgIH0pOwogICAgYW5zUG9wLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwp9KQouY2F0Y2goZXJyb3IgPT4gewogICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpOwp9KS5maW5hbGx5KCgpID0+IHsKICAgIEV4aXRMb2FkKCk7Cn0pOwp9CgovL2F1dG8gY2xlYXIKYXN5bmMgZnVuY3Rpb24gUnVuQXV0bygpIHsKICAgIFNob3dDdXN0b21Qb3AoIkJvb3Qgc3lzdGVtLi4uIik7CgogICAgY2ZnID0gewogICAgICAgIENsYXNzSUQgOiBBdXRvQ2xlYXJEYXRhLkNsYXNzSUQsCiAgICAgICAgVGFza0lEIDogQXV0b0NsZWFyRGF0YS5UYXNrSUQsCiAgICAgICAgYXV0aG9yaXphdGlvbiA6IFVzZXJEYXRhLkF1dGhUb2tlbiwKICAgICAgICBUZXN0SUQgOiBVc2VyRGF0YS5UZXN0SUQsCiAgICB9OwoKICAgIGF3YWl0IEF1dG9DbGVhcihjZmcpOwp9Cgphc3luYyBmdW5jdGlvbiBBdXRvQ2xlYXIoY2ZnKSB7CiAgICAvL2dldCBhbnN3ZXIKICAgIGxldCBBbnNEYXRhOwogICAgCiAgICAoYXN5bmMgZnVuY3Rpb24oKXsKICAgICAgY29uc3QgdXJsID0gImh0dHBzOi8vYXBwLWFwaS5hYmNlZWQuY29tL3dlYi93b3JsZF9wcmFjdGljZXMvaW5mbz9pZF90YXNrPSIgKyBjZmcuVGFza0lEOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgImRvY3VtZW50TGlmZWN5Y2xlIjogImFjdGl2ZSIsCiAgICAgICAgICAgICAgICAiZnJhbWVUeXBlIjogIm91dGVybW9zdF9mcmFtZSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUsIGJyLCB6c3RkIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiamEsZW47cT0wLjksaWc7cT0wLjgsaXQ7cT0wLjcsc247cT0wLjYsdGc7cT0wLjUsdXo7cT0wLjQsbHQ7cT0wLjMsbnNvO3E9MC4yLGF6O3E9MC4xLGVlO3E9MC4xIiwKICAgICAgICAgICAgICAgICJhdXRob3JpemF0aW9uIjogIkJlYXJlciAiICsgY2ZnLmF1dGhvcml6YXRpb24sCiAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgInNlYy1jaC11YSI6ICJcIk5vdClBO0JyYW5kXCI7dj1cIjk5XCIsIFwiR29vZ2xlIENocm9tZVwiO3Y9XCIxMjdcIiwgXCJDaHJvbWl1bVwiO3Y9XCIxMjdcIiIsCiAgICAgICAgICAgICAgICAic2VjLWNoLXVhLW1vYmlsZSI6ICI/MCIsCiAgICAgICAgICAgICAgICAic2VjLWNoLXVhLXBsYXRmb3JtIjogIlwiQ2hyb21lIE9TXCIiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1EZXN0IjogImVtcHR5IiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtTW9kZSI6ICJjb3JzIiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtU2l0ZSI6ICJzYW1lLXNpdGUiLAogICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFgxMTsgQ3JPUyB4ODZfNjQgMTQ1NDEuMC4wKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTI3LjAuMC4wIFNhZmFyaS81MzcuMzYiLAogICAgICAgICAgICAgICAgIlgtVXNlci1BZ2VudCI6ICJhYmNlZWQtd2ViOjcuMS4wL0Nocm9tZToxMjcuMC42NTMzLjEzMiIKICAgICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDjg6zjgrnjg53jg7Pjgrnjgrnjg4bjg7zjgr/jgrk6ICR7cmVzcG9uc2Uuc3RhdHVzfWApOwogICAgICAgIH0KICAgIAogICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgY29uc29sZS5sb2coanNvbik7CiAgICAgICAgQW5zRGF0YSA9IGpzb247CiAgICAgICAgcU51bSA9IEFuc0RhdGEuYWxsX3F1ZXN0aW9uX2xpc3QubGVuZ3RoLTE7CiAgICAgICAgY29uc3Qgc2xlZXAgPSAodGltZSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZSkpOwogICAgCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBBbnNEYXRhLmFsbF9xdWVzdGlvbl9saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhbnMgPSBBbnNEYXRhLmFsbF9xdWVzdGlvbl9saXN0W2ldOwogICAgICAgICAgU2VuZEFucyhhbnMsIGksIHFOdW0pOwogICAgICAgICAgQWRkU3R1ZHlUaW1lKGNmZyk7CiAgICAgICAgICBhd2FpdCBzbGVlcCg1MCk7CiAgICAgICAgfQoKICAgICAgICBTaG93Q3VzdG9tUG9wKCJBbGwgQ2xlYXIhIik7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgfQogICAgfSgpKQogICAgCiAgICAvL2FkZCBzdHVkeSB0aW1lCiAgICBhc3luYyBmdW5jdGlvbiBBZGRTdHVkeVRpbWUoY2ZnKSB7CiAgICAgICAgY29uc3QgYm9keSA9IHsKICAgICAgICAgICAgImFkZF9zZWNvbmQiOk1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAzMCApLAogICAgICAgICAgICAiaWRfdGFzayI6Y2ZnLlRhc2tJRCwKICAgICAgICAgICAgImlkX3Rlc3QiOmNmZy5UZXN0SUQsCiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiYWRkZWQgOiAiLGJvZHkuYWRkX3NlY29uZCk7CgogICAgICAgIGNvbnN0IHVybCA9ICJodHRwczovL2FwcC1hcGkuYWJjZWVkLmNvbS93ZWIvc3R1ZHlfdGltZS91cGRhdGUiOwogICAgICAgIGF3YWl0IGZldGNoKHVybCx7CiAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgImRvY3VtZW50TGlmZWN5Y2xlIjogImFjdGl2ZSIsCiAgICAgICAgICAgICAgICAiZnJhbWVUeXBlIjogIm91dGVybW9zdF9mcmFtZSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUsIGJyLCB6c3RkIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiamEsZW47cT0wLjksaWc7cT0wLjgsaXQ7cT0wLjcsc247cT0wLjYsdGc7cT0wLjUsdXo7cT0wLjQsbHQ7cT0wLjMsbnNvO3E9MC4yLGF6O3E9MC4xLGVlO3E9MC4xIiwKICAgICAgICAgICAgICAgICJhdXRob3JpemF0aW9uIjogIkJlYXJlciAiK2NmZy5hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICJzZWMtY2gtdWEiOiAiXCJOb3QpQTtCcmEgbmRcIjt2PVwiOTlcIiwgXCJHb29nbGUgQ2hyb21lXCI7dj1cIjEyN1wiLCBcIkNocm9taXVtXCI7dj1cIjEyN1wiIiwKICAgICAgICAgICAgICAgICJzZWMtY2gtdWEtbW9iaWxlIjogIj8wIiwKICAgICAgICAgICAgICAgICJzZWMtY2gtdWEtcGxhdGZvcm0iOiAiXCJDaHJvbWUgT1NcIiIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLURlc3QiOiAiZW1wdHkiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1Nb2RlIjogImNvcnMiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1TaXRlIjogInNhbWUtc2l0ZSIsCiAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoWDExOyBDck9TIHg4Nl82NCAxNDU0MS4wLjApIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjcuMC4wLjAgU2FmYXJpLzUzNy4zNiIsCiAgICAgICAgICAgICAgICAiWC1Vc2VyLUFnZW50IjogImFiY2VlZC13ZWI6Ny4xLjAvQ2hyb21lOjEyNy4wLjY1MzMuMTMyIgogICAgICAgICAgICAgIH0sCiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRXJyb3IgOiIscmVzcG9uc2Uuc3RhdHVzKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIC8vYWRkIGVuZAoKICAgIC8vc2VuZCBhbnN3ZXIKICAgIGFzeW5jIGZ1bmN0aW9uIFNlbmRBbnMoQW5zTnVtLCBudW1QLCBxTnVtKSB7CiAgICAgICAgVXNlckNmZyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlV0aWxpdHlDb25maWciKSk7CiAgICAgICAgaWYgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgPCAoMTAwIC0gVXNlckNmZy5Db3JyZWN0QW5zd2VyUmF0ZSkgJiYgRmFrZU1pc3NHZW4pIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIk1pc3MhIik7CiAgICAgICAgICAgIGlmIChBbnNOdW0udHJ1ZV9hbnN3ZXIgIT0gNCkgewogICAgICAgICAgICAgICAgQW5zTnVtLnRydWVfYW5zd2VyKysKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIEFuc051bS50cnVlX2Fuc3dlci0tCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICBjb25zdCBib2R5ID0gewogICAgICAgICJxdWVzdGlvbl9saXN0IjogWwogICAgICAgICAgewogICAgICAgICAgICAiaWRfdGVzdCI6IGNmZy5UZXN0SUQsCiAgICAgICAgICAgICJudW1fcGFydCI6IEFuc051bS5udW1fcGFydCwKICAgICAgICAgICAgIm51bV9xdWVzdGlvbiI6IEFuc051bS5udW1fcXVlc3Rpb24sCiAgICAgICAgICAgICJpbnB1dHRlZF9hbnN3ZXIiOiAiIiwKICAgICAgICAgICAgImlzX3VuZWFzeSI6IDAsCiAgICAgICAgICAgICJjb25zdW1lX3NlY29uZCI6IE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAxNTAgKSwKICAgICAgICAgICAgImFjcXVpcmVfc3RhdHVzIjogMSwKICAgICAgICAgICAgImNob2ljZWRfYW5zd2VyIjogQW5zTnVtLnRydWVfYW5zd2VyCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICAiaWRfdGFzayI6IGNmZy5UYXNrSUQsCiAgICAgICAgImlkX2NsYXNzIjogY2ZnLkNsYXNzSUQsCiAgICAgICAgImlzX3dvcmxkX3ByYWN0aWNlIjogMQogICAgICB9CiAgICAgIGlmIChxTnVtID09IG51bVApIHsKICAgICAgICBib2R5Lmhhc19maW5pc2hlZF93b3JsZF9wcmFjdGljZSA9IDE7CiAgICAgICAgY29uc29sZS5sb2coImFkZCIpOwogICAgICB9CiAgICAgIGNvbnN0IHVybCA9ICJodHRwczovL2FwcC1hcGkuYWJjZWVkLmNvbS93ZWIvcXVlc3Rpb24vZ3JhZGluZyI7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgImRvY3VtZW50TGlmZWN5Y2xlIjogImFjdGl2ZSIsCiAgICAgICAgICAgICAgICAiZnJhbWVUeXBlIjogIm91dGVybW9zdF9mcmFtZSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUsIGJyLCB6c3RkIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiamEsZW47cT0wLjksaWc7cT0wLjgsaXQ7cT0wLjcsc247cT0wLjYsdGc7cT0wLjUsdXo7cT0wLjQsbHQ7cT0wLjMsbnNvO3E9MC4yLGF6O3E9MC4xLGVlO3E9MC4xIiwKICAgICAgICAgICAgICAgICJhdXRob3JpemF0aW9uIjogIkJlYXJlciAiK2NmZy5hdXRob3JpemF0aW9uLAogICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICJzZWMtY2gtdWEiOiAiXCJOb3QpQTtCcmEgbmRcIjt2PVwiOTlcIiwgXCJHb29nbGUgQ2hyb21lXCI7dj1cIjEyN1wiLCBcIkNocm9taXVtXCI7dj1cIjEyN1wiIiwKICAgICAgICAgICAgICAgICJzZWMtY2gtdWEtbW9iaWxlIjogIj8wIiwKICAgICAgICAgICAgICAgICJzZWMtY2gtdWEtcGxhdGZvcm0iOiAiXCJDaHJvbWUgT1NcIiIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLURlc3QiOiAiZW1wdHkiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1Nb2RlIjogImNvcnMiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1TaXRlIjogInNhbWUtc2l0ZSIsCiAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoWDExOyBDck9TIHg4Nl82NCAxNDU0MS4wLjApIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjcuMC4wLjAgU2FmYXJpLzUzNy4zNiIsCiAgICAgICAgICAgICAgICAiWC1Vc2VyLUFnZW50IjogImFiY2VlZC13ZWI6Ny4xLjAvQ2hyb21lOjEyNy4wLjY1MzMuMTMyIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2snKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2VzcyA6ICIgKyBudW1QKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IubWVzc2FnZSk7CiAgICAgIH0KICAgIH0KfQovL2F1dG8gZW5kCgovL2F1dGggZnVuYwphc3luYyBmdW5jdGlvbiBHZXRVc2VyRGF0YUxpc3QoKSB7CiAgICBjb25zdCBoYW5kbGVyID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vYWJjZWVkLXV0aWxpeS1hdXRoLmRlbm8uZGV2L3VzZXJzIix7CiAgICAgICAgbWV0aG9kOiJHRVQiLAogICAgfSkudGhlbihhc3luYyBkYXRhID0+IHsKICAgICAgICByZXR1cm4gYXdhaXQgZGF0YS5qc29uKCk7CiAgICB9KTsKfQoKYXN5bmMgZnVuY3Rpb24gU2VuZFVzZXJEYXRhKCkgewogICAgY29uc3QgaGFuZGxlciA9IGF3YWl0IGZldGNoKCJodHRwczovL2FiY2VlZC11dGlsaXktYXV0aC5kZW5vLmRldi91c2VycyIsewogICAgICAgIG1ldGhvZDoiUE9TVCIsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBpZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhYmNlZWQiKSkuYXV0aC51c2VySW5mby5pZF91c2VyLAogICAgICAgICAgICBuYW1lOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiY2VlZCIpKS5hdXRoLnVzZXJJbmZvLm5hbWUsCiAgICAgICAgICAgIGVtYWlsOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiY2VlZCIpKS5hdXRoLnVzZXJJbmZvLmVtYWlsLAogICAgICAgIH0pLAogICAgfSkudGhlbihhc3luYyBkYXRhID0+IHsKICAgICAgICByZXR1cm4gYXdhaXQgZGF0YS5zdGF0dXM7CiAgICB9KTsKfQovL2F1dGggZW5kCgphc3luYyBmdW5jdGlvbiBJbmplY3QoKSB7CiAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QgIT0gImFwcC5hYmNlZWQuY29tIiB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2hvd0h1YmJveCIpICE9IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgLy9jaGVjayB1c2VyCiAgICBjb25zb2xlLmxvZygiYXV0aCBzdGFydCIpOwogICAgYXV0aEtleSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVdGlsaXR5QXV0aCIpOwogICAgaWYgKGF1dGhLZXkgPT0gbnVsbCkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJVdGlsaXR5QXV0aCIsIGJ0b2EoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjZWVkIikpLmF1dGgudXNlckluZm8uaWRfdXNlcikpOwogICAgfQoKICAgIGF3YWl0IGZldGNoKCJodHRwczovL2FiY2VlZC11dGlsaXktYXV0aC5kZW5vLmRldi91c2VycyIsewogICAgICAgIG1ldGhvZDoiR0VUIiwKICAgIH0pLnRoZW4oYXN5bmMgZGF0YSA9PiB7CiAgICAgICAgdXNlcmxpc3QgPSBhd2FpdCBkYXRhLmpzb24oKTsKICAgICAgICBBY2NleGlzdHMgPSBmYWxzZTsKICAgICAgICBhdXRoZWRGbGFnID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2codXNlcmxpc3QpOwogICAgICAgIAogICAgICAgIGlmICh1c2VybGlzdCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXJsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBlbGVtID0gdXNlcmxpc3RbaV07CgogICAgICAgICAgICAgICAgaWYgKGVsZW0uaWQgPT0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjZWVkIikpLmF1dGgudXNlckluZm8uaWRfdXNlcikgewogICAgICAgICAgICAgICAgICAgIEFjY2V4aXN0cyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uZW5hYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhlZEZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQXV0aGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgCiAgICAgICAgICAgIGlmICghQWNjZXhpc3RzKSB7CiAgICAgICAgICAgICAgICAvL1NlbmQgZGF0YQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goImh0dHBzOi8vYWJjZWVkLXV0aWxpeS1hdXRoLmRlbm8uZGV2L3VzZXJzIix7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiJQT1NUIiwKICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiY2VlZCIpKS5hdXRoLnVzZXJJbmZvLmlkX3VzZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjZWVkIikpLmF1dGgudXNlckluZm8ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjZWVkIikpLmF1dGgudXNlckluZm8uZW1haWwsCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihhc3luYyBkYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkluamVjdGVkISIpOwogICAgICAgICAgICAgICAgICAgICAgICBIVE1MSW5qZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChhdXRoZWRGbGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJJbmplY3RlZCEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgSFRNTEluamVjdCgpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWxlcnQoIllvdSBVbmF1dGhvcml6ZWQiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCJodHRwczovL2FiY2VlZC11dGlsaXktYXV0aC5kZW5vLmRldi91c2VycyIsewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDoiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBpZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhYmNlZWQiKSkuYXV0aC51c2VySW5mby5pZF91c2VyLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiY2VlZCIpKS5hdXRoLnVzZXJJbmZvLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiY2VlZCIpKS5hdXRoLnVzZXJJbmZvLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oYXN5bmMgZGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJJbmplY3RlZCEiKTsKICAgICAgICAgICAgICAgIEhUTUxJbmplY3QoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KTsKICAgIC8vY2hlY2sgZW5kCn0KCi8vY29uZmlnClVzZXJDb25maWcgPSB7CiAgICBDb3JyZWN0QW5zd2VyUmF0ZTogNjAsCn07CgpmdW5jdGlvbiBMb2FkQ2ZnKCkgewogICAgY2ZnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlV0aWxpdHlDb25maWciKTsKICAgIGlmIChjZmcpIHsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjZmcpOwogICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiVXRpbGl0eUNvbmZpZyIsSlNPTi5zdHJpbmdpZnkoVXNlckNvbmZpZykpOwogICAgICAgIHJldHVybiBVc2VyQ29uZmlnOwogICAgfQp9CgpmdW5jdGlvbiBVcGRhdGVDZmcoKSB7CiAgICByYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhUmF0ZSIpLnZhbHVlOwogICAgaWYgKHJhdGUgPD0gMTAwKSB7CiAgICAgICAgY2ZnID0gTG9hZENmZygpOwogICAgICAgIGNmZy5Db3JyZWN0QW5zd2VyUmF0ZSA9IHJhdGU7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIlV0aWxpdHlDb25maWciLEpTT04uc3RyaW5naWZ5KGNmZykpOwogICAgfSBlbHNlIHsKICAgICAgICByYXRlID0gMTAwOwogICAgICAgIGNmZyA9IExvYWRDZmcoKTsKICAgICAgICBjZmcuQ29ycmVjdEFuc3dlclJhdGUgPSByYXRlOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJVdGlsaXR5Q29uZmlnIixKU09OLnN0cmluZ2lmeShjZmcpKTsKICAgIH0KCiAgICBTaG93Q3VzdG9tUG9wKCJVcGRhdGVkIik7Cn0KCmZ1bmN0aW9uIE9wZW5DZmcoKSB7CiAgICBjZmdQb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29uZmlnUG9wIik7CiAgICBtYWtlRHJhZ2dhYmxlKGNmZ1BvcCk7CiAgICBjZmdQb3Auc3R5bGUuZGlzcGxheSA9ICJibG9jayI7Cn0KLy9lbmQgY2ZnCgpmdW5jdGlvbiBIVE1MSW5qZWN0KCkgewogICAgCiAgICBodWJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKaHViID0gZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoaHViQnV0dG9uLCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpOwpodWIuaW5uZXJIVE1MICs9IGF0b2IoSW5qZWN0SFRNTCk7CgovL0luaXQKY29uc3QgZHJhZ2dhYmxlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcmFnZ2FibGVFbGVtZW50Iik7CmNvbnN0IGh1YmJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJodWJib3giKTsKbWFrZURyYWdnYWJsZShkcmFnZ2FibGVFbGVtZW50KTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNob3dIdWJib3giKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewogICAgbWFrZURyYWdnYWJsZShodWJib3gpOwogICAgaHViYm94LnN0eWxlLmRpc3BsYXkgPSBodWJib3guc3R5bGUuZGlzcGxheSA9PT0gIm5vbmUiID8gImJsb2NrIiA6ICJub25lIjsKfSk7Cn0KCkluamVjdCgpOwo8L3NjcmlwdD4=','1191546JWDEbJ','GET','https://app-api.abceed.com/web/world_practices/info?id_task=','firstChild','All\x20Clearと出ても処理が少し続くので、開始してから10秒ほど待機してください','タスクを開始してから押してください','Released\x20new\x20version!\x0aUpdate\x20now!','hubbox','innerHTML','gzip,\x20deflate,\x20br,\x20zstd','customPop','email','loadingPop','body','946530cQtVKn','error','color','word','focus','application/json','catch','application/json,\x20text/plain,\x20*/*','<a\x20id=\x22closeBtn\x22\x20onclick=\x22javascript:CloseElem()\x22>×</a>','CorrectAnswerRate','length','textContent','children','true_answer','clientX','add_second','cors','Error:','setProperty','820729jGNZfR','top','id_user','empty','version','none','has_finished_world_practice','\x22Not)A;Brand\x22;v=\x2299\x22,\x20\x22Google\x20Chrome\x22;v=\x22127\x22,\x20\x22Chromium\x22;v=\x22127\x22','authorization','value','\x22Not)A;Bra\x20nd\x22;v=\x2299\x22,\x20\x22Google\x20Chrome\x22;v=\x22127\x22,\x20\x22Chromium\x22;v=\x22127\x22','status','same-site','task_info','4722cTwcNp','click','486845Ptxdyt','https://app-api.abceed.com/web/question/grading','POST','important','UtilityConfig','Success:','id_test','\x22Chrome\x20OS\x22','classes','outermost_frame','active','pathname','ClassID','forEach','appendChild','block','All\x20Clear!','1636gGErUm','ja,en;q=0.9,ig;q=0.8,it;q=0.7,sn;q=0.6,tg;q=0.5,uz;q=0.4,lt;q=0.3,nso;q=0.2,az;q=0.1,ee;q=0.1','added\x20:\x20','observe','onmousemove','draggableElement','parse','showHubbox','Network\x20response\x20was\x20not\x20ok','insertBefore','enable','281633DXzqwn','random','finally','host','setItem','getElementById','UtilityAuth','split','userInfo','Mozilla/5.0\x20(X11;\x20CrOS\x20x86_64\x2014541.0.0)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/127.0.0.0\x20Safari/537.36','style','stringify','then','auth\x20start','all_question_list','Miss!','left','name','classList','replaceAll','1503546FSxacP','json','preventDefault','log','英語\x20日本語<hr\x20style=\x22border:\x20none\x20!important;border-top:\x201px\x20solid\x20black\x20!important;margin:\x200\x20!important;\x22><br>','TaskID','addEventListener','floor','/books/study/word-test-confirm/quiz','https://abceed-utiliy-auth.deno.dev/version','createElement','background-color','display'];_0x2acd=function(){return _0x213727;};return _0x2acd();}async function SendUserData(){const _0x5a8371=_0x4f6015;let _0x331156=new Date();const _0x3ec62a=await fetch(_0x5a8371(0xcf),{'method':_0x5a8371(0x7a),'body':JSON[_0x5a8371(0x9f)]({'id':JSON['parse'](localStorage[_0x5a8371(0xdb)](_0x5a8371(0xbb)))[_0x5a8371(0xc6)]['userInfo'][_0x5a8371(0x6a)],'name':JSON[_0x5a8371(0x8f)](localStorage['getItem'](_0x5a8371(0xbb)))[_0x5a8371(0xc6)][_0x5a8371(0x9c)][_0x5a8371(0xa5)],'email':JSON['parse'](localStorage[_0x5a8371(0xdb)]('abceed'))[_0x5a8371(0xc6)]['userInfo'][_0x5a8371(0xeb)],'time':_0x331156[_0x5a8371(0xc3)]()})})[_0x5a8371(0xa0)](async _0x3bb265=>{const _0x2d2efb=_0x5a8371;return await _0x3bb265[_0x2d2efb(0x73)];});}async function Inject(){const _0x30f1e6=_0x4f6015;if(location[_0x30f1e6(0x97)]!='app.abceed.com'||document['getElementById'](_0x30f1e6(0x90))!=null)return;console[_0x30f1e6(0xab)](_0x30f1e6(0xa1)),authKey=localStorage['getItem'](_0x30f1e6(0x9a)),authKey==null&&localStorage[_0x30f1e6(0x98)](_0x30f1e6(0x9a),btoa(JSON[_0x30f1e6(0x8f)](localStorage[_0x30f1e6(0xdb)](_0x30f1e6(0xbb)))[_0x30f1e6(0xc6)][_0x30f1e6(0x9c)][_0x30f1e6(0x6a)])),await fetch('https://abceed-utiliy-auth.deno.dev/users',{'method':'GET'})[_0x30f1e6(0xa0)](async _0x16c391=>{const _0x1603a8=_0x30f1e6;userlist=await _0x16c391[_0x1603a8(0xa9)](),Accexists=![],authedFlag=![],console[_0x1603a8(0xab)](userlist);if(userlist){for(let _0x55944e=0x0;_0x55944e<userlist[_0x1603a8(0xf8)];_0x55944e++){const _0x148962=userlist[_0x55944e];if(_0x148962['id']==JSON[_0x1603a8(0x8f)](localStorage['getItem'](_0x1603a8(0xbb)))['auth'][_0x1603a8(0x9c)][_0x1603a8(0x6a)]){Accexists=!![];if(_0x148962[_0x1603a8(0x93)]){authedFlag=!![],console['log']('Authed');break;}break;}}if(!Accexists){exitFlag=![];let _0x5e3419=new Date();await fetch(_0x1603a8(0xcf),{'method':_0x1603a8(0x7a),'body':JSON[_0x1603a8(0x9f)]({'id':JSON[_0x1603a8(0x8f)](localStorage[_0x1603a8(0xdb)](_0x1603a8(0xbb)))['auth'][_0x1603a8(0x9c)][_0x1603a8(0x6a)],'name':JSON[_0x1603a8(0x8f)](localStorage[_0x1603a8(0xdb)](_0x1603a8(0xbb)))[_0x1603a8(0xc6)]['userInfo'][_0x1603a8(0xa5)],'email':JSON['parse'](localStorage['getItem'](_0x1603a8(0xbb)))[_0x1603a8(0xc6)]['userInfo']['email'],'time':_0x5e3419[_0x1603a8(0xc3)]()})})[_0x1603a8(0xa0)](async _0x41cebf=>{const _0x382c28=_0x1603a8;_0x41cebf[_0x382c28(0x73)]!=0xc8?(alert('Injected!'),HTMLInject(),await fetch(_0x382c28(0xb1),{'method':_0x382c28(0xe1)})[_0x382c28(0xa0)](async _0x122d69=>{const _0x5e93ab=_0x382c28;jo=await _0x122d69[_0x5e93ab(0xa9)](),ScriptVersion!=jo[_0x5e93ab(0x6c)]&&(alert(_0x5e93ab(0xe6)),window['open'](_0x5e93ab(0xd2)));})):exitFlag=!![];});if(exitFlag)return alert(_0x1603a8(0xde));}else{if(authedFlag)alert(_0x1603a8(0xb5)),HTMLInject(),await fetch(_0x1603a8(0xb1),{'method':_0x1603a8(0xe1)})['then'](async _0x3aa546=>{const _0x2a3ab0=_0x1603a8;jo=await _0x3aa546[_0x2a3ab0(0xa9)](),ScriptVersion!=jo['version']&&(alert('Released\x20new\x20version!\x0aUpdate\x20now!'),window[_0x2a3ab0(0xba)](_0x2a3ab0(0xd2)));});else return alert(_0x1603a8(0xde));}}else{exitFlag=![],await fetch(_0x1603a8(0xcf),{'method':_0x1603a8(0x7a),'body':JSON[_0x1603a8(0x9f)]({'id':JSON[_0x1603a8(0x8f)](localStorage[_0x1603a8(0xdb)](_0x1603a8(0xbb)))[_0x1603a8(0xc6)][_0x1603a8(0x9c)][_0x1603a8(0x6a)],'name':JSON[_0x1603a8(0x8f)](localStorage[_0x1603a8(0xdb)](_0x1603a8(0xbb)))[_0x1603a8(0xc6)][_0x1603a8(0x9c)]['name'],'email':JSON[_0x1603a8(0x8f)](localStorage[_0x1603a8(0xdb)](_0x1603a8(0xbb)))[_0x1603a8(0xc6)][_0x1603a8(0x9c)]['email']})})[_0x1603a8(0xa0)](async _0x5acfcf=>{const _0x333acc=_0x1603a8;if(_0x5acfcf[_0x333acc(0x73)]!=0xc8)alert(_0x333acc(0xb5)),HTMLInject(),await fetch(_0x333acc(0xb1),{'method':_0x333acc(0xe1)})[_0x333acc(0xa0)](async _0x94179d=>{const _0x3ffa6a=_0x333acc;jo=await _0x94179d['json'](),ScriptVersion!=jo[_0x3ffa6a(0x6c)]&&(alert(_0x3ffa6a(0xe6)),window[_0x3ffa6a(0xba)](_0x3ffa6a(0xd2)));});else{exitFlag=!![];return;}});if(exitFlag)return alert('You\x20Unauthorized');}});}function HTMLInject(){const _0x3ec05e=_0x4f6015;hubButton=document[_0x3ec05e(0xb2)]('div'),hub=document[_0x3ec05e(0xed)][_0x3ec05e(0x92)](hubButton,document['body'][_0x3ec05e(0xe3)]),hub['innerHTML']+=atob(InjectHTML);const _0x3c3d6d=document[_0x3ec05e(0x99)](_0x3ec05e(0x8e)),_0x5ac4bf=document['getElementById'](_0x3ec05e(0xe7));makeDraggable(_0x3c3d6d),document[_0x3ec05e(0x99)](_0x3ec05e(0x90))[_0x3ec05e(0xae)](_0x3ec05e(0x77),function(){const _0x2c2717=_0x3ec05e;makeDraggable(_0x5ac4bf),_0x5ac4bf[_0x2c2717(0x9e)][_0x2c2717(0xb4)]=_0x5ac4bf['style'][_0x2c2717(0xb4)]==='none'?_0x2c2717(0x87):_0x2c2717(0x6d);});}function LoadCfg(){const _0x42a365=_0x4f6015;return cfg=localStorage['getItem'](_0x42a365(0x7c)),cfg?JSON[_0x42a365(0x8f)](cfg):(localStorage[_0x42a365(0x98)](_0x42a365(0x7c),JSON[_0x42a365(0x9f)](UserConfig)),UserConfig);}function UpdateCfg(){const _0x3ae7ca=_0x4f6015;rate=document[_0x3ae7ca(0x99)]('caRate')[_0x3ae7ca(0x71)],rate<=0x64?(cfg=LoadCfg(),cfg[_0x3ae7ca(0xf7)]=rate,localStorage['setItem'](_0x3ae7ca(0x7c),JSON[_0x3ae7ca(0x9f)](cfg))):(rate=0x64,cfg=LoadCfg(),cfg['CorrectAnswerRate']=rate,localStorage['setItem'](_0x3ae7ca(0x7c),JSON[_0x3ae7ca(0x9f)](cfg))),ShowCustomPop(_0x3ae7ca(0xb7));}function OpenCfg(){const _0x352f47=_0x4f6015;cfgPop=document[_0x352f47(0x99)](_0x352f47(0xbf)),makeDraggable(cfgPop),cfgPop[_0x352f47(0x9e)][_0x352f47(0xb4)]=_0x352f47(0x87),ratebox=document['getElementById'](_0x352f47(0xb6)),ratebox[_0x352f47(0x71)]=LoadCfg()['CorrectAnswerRate'],ratebox[_0x352f47(0xf2)]();}function HTMLInject(){const _0x31d2eb=_0x4f6015;hubButton=document[_0x31d2eb(0xb2)](_0x31d2eb(0xd1)),hub=document['body'][_0x31d2eb(0x92)](hubButton,document['body']['firstChild']),hub['innerHTML']+=atob(InjectHTML);const _0x273cd9=document[_0x31d2eb(0x99)](_0x31d2eb(0x8e)),_0x2bfb36=document[_0x31d2eb(0x99)](_0x31d2eb(0xe7));makeDraggable(_0x273cd9),document[_0x31d2eb(0x99)]('showHubbox')[_0x31d2eb(0xae)](_0x31d2eb(0x77),function(){const _0x559bcc=_0x31d2eb;makeDraggable(_0x2bfb36),_0x2bfb36[_0x559bcc(0x9e)][_0x559bcc(0xb4)]=_0x2bfb36[_0x559bcc(0x9e)]['display']===_0x559bcc(0x6d)?_0x559bcc(0x87):_0x559bcc(0x6d);});}Inject();
